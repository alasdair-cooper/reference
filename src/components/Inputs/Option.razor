@using AlasdairCooper.Reference.Components.Utilities

@inherits DefaultComponentBase

@implements IDisposable

@typeparam T

@code {

    [Parameter]
    public T Value { get; set; } = default!;

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [CascadingParameter]
    public Select<T>? Select { get; set; }

    protected override void OnParametersSet()
    {
        RequiredCascadingParameterException.ThrowIfNull(Select);
        Select.RegisterOption(this);
    }

    public void Dispose()
    {
        RequiredCascadingParameterException.ThrowIfNull(Select);
        Select.DeregisterOption(this);
    }

}