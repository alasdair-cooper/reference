@typeparam T

@using Microsoft.Extensions.Options
@inherits StateViewWithParameters<object, T>

@if (State is not null)
{
    <ErrorBoundary>
        <ChildContent>
            @if (Policy is not null || Roles is not null || Resource is not null)
            {
                <AuthorizeView
                    Policy="@Policy"
                    Roles="@Roles"
                    Resource="@Resource">
                    <Authorized>
                        @RenderState(State)
                    </Authorized>
                    <NotAuthorized>
                        @RenderUnauthorized(context)
                    </NotAuthorized>
                </AuthorizeView>
            }
            else
            {
                @RenderState(State)
            }
        </ChildContent>
        <ErrorContent>
            @RenderError(new ErrorState(context))
        </ErrorContent>
    </ErrorBoundary>
}

@code {

    protected override void OnInitialized() => LoadStoreWithStateHandler(null!);

    public StateView(IOptions<StateOptions> options) : base(options) { }

}