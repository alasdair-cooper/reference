@using AlasdairCooper.Reference.Components.Utilities

@typeparam T

@implements IDisposable

@code {

    [Parameter]
    [EditorRequired]
    public required string Title { get; set; }
    
    [Parameter]
    public Func<T, object?>? Property { get; set; }
    
    [Parameter]
    public RenderFragment<CellContext<T>>? CellContent { get; set; } 
    
    [CascadingParameter]
    public ITable<T>? Table { get; set; }
    
    [Parameter]
    public int? Ordinal { get; set; } 

    protected override void OnParametersSet()
    {
        RequiredCascadingParameterException.ThrowIfNull(Table);
        Table.RegisterColumn(this);
    }

    public void Dispose()
    {
        RequiredCascadingParameterException.ThrowIfNull(Table);
        Table.DeregisterColumn(this);
    }

}